jQuery((function($){function getEnhancedSelectFormatString(){if("undefined"!=typeof wc_country_select_params)return{language:{errorLoading:function(){return wc_country_select_params.i18n_searching},inputTooLong:function(args){var overChars=args.input.length-args.maximum;return 1===overChars?wc_country_select_params.i18n_input_too_long_1:wc_country_select_params.i18n_input_too_long_n.replace("%qty%",overChars)},inputTooShort:function(args){var remainingChars=args.minimum-args.input.length;return 1===remainingChars?wc_country_select_params.i18n_input_too_short_1:wc_country_select_params.i18n_input_too_short_n.replace("%qty%",remainingChars)},loadingMore:function(){return wc_country_select_params.i18n_load_more},maximumSelected:function(args){return 1===args.maximum?wc_country_select_params.i18n_selection_too_long_1:wc_country_select_params.i18n_selection_too_long_n.replace("%qty%",args.maximum)},noResults:function(){return wc_country_select_params.i18n_no_matches},searching:function(){return wc_country_select_params.i18n_searching}}}}var cities=null!=wcpcd_ajax.json?wcpcd_ajax.json:[],select2_args=$.extend({placeholderOption:"first",width:"100%"},getEnhancedSelectFormatString());function state_city_load(){var $this_state=$("select.state_select"),$this_city=$('input[id*="_city"]'),state_id=$this_state.attr("id"),state_val=$this_state.val(),city_id=$this_city.attr("id"),city_val=$this_city.val();setTimeout((function(){""!=state_val?($this_state.parents(".form-row").data("val",state_val).data("id",state_id),$this_state.trigger("change")):($("select.state_select option").each((function(){if(cur=$(this).not(":empty").first().val(),cur)return!1})),$this_state.val(cur),$this_state.trigger("change")),""!=city_val&&($this_city.parents(".form-row").data("val",city_val).data("id",city_id),$this_state.trigger("change"))}),450)}function country_load(){var $this_country=$("select.country_select"),country_id=$this_country.attr("id"),country_val=$this_country.val();""!=country_val&&$this_country.parents(".form-row").data("val",country_val).data("id",country_id)}function country_changing($state,$citybox,country,$parent){var state=$state.val(),city=$citybox.val(),temp="",flag=0,is_current=0;if($state.is("select")&&(state=state||$state.find("option:eq(1)").val(),$state.val(state),$state.length&&($state.select2(select2_args),$state.trigger("change"))),$citybox.is("select")&&void 0===cities[country]){var input_name=$citybox.attr("name"),input_id=$citybox.attr("id"),placeholder=$citybox.attr("placeholder");$citybox.replaceWith('<input type="text" name="'+input_name+'" id="'+input_id+'" class="city_select input-text" placeholder="'+placeholder+'" />'),city&&$("#"+input_id).val(city),($citybox=$("#"+input_id)).next(".select2").remove(),$state.val(state)}}function city_select($citybox,state){var form_row=$citybox.closest(".form-row, .form-field"),country=form_row.closest("div").find(".country_to_state").val(),value=$citybox.val();if(form_row.removeClass("input-text"),void 0!==cities[country]){if($citybox.is("input")){var input_name=$citybox.attr("name"),input_id=$citybox.attr("id"),placeholder=$citybox.attr("placeholder"),value=$citybox.val();$citybox.replaceWith('<select name="'+input_name+'" id="'+input_id+'" class="city_select" data-value="'+value+'" placeholder="'+placeholder+'"></select>'),$citybox=$("#"+input_id)}else $citybox.prop("disabled",!1);var options="",current_cities=cities[country][state];for(var index in current_cities)if(current_cities.hasOwnProperty(index)){var cityName=current_cities[index].city;options=options+'<option value="'+cityName+'">'+cityName+"</option>"}$citybox.html('<option value="">'+wcpcd_ajax.city_first_option+"</option>"+options),""!==wcpcd_ajax.city_blank?$citybox.val($citybox.find("option:eq(0)").val()).change():""!=value&&$('option[value="'+value+'"]',$citybox).length?$citybox.val(value).change():$citybox.val($citybox.find("option:eq(1)").val()).change(),$citybox.length&&$citybox.select2(select2_args),$(document.body).trigger("city_to_select")}}function change_zip_code($citybox,$container,state,city){var country=$container.find(".country_to_state").val(),current_cities=cities[country][state];for(var index in current_cities)if(current_cities.hasOwnProperty(index)&&current_cities[index].city===city){var zipcode=current_cities[index].zip;$(document).trigger("wcpcd_postcode",[state,city,index,zipcode,$container]),$container.find('input[id*="postcode"]').val(zipcode)}}function admin_billing_change(){var billing_obj=$("#_billing_state"),billing_val=billing_obj.val()||woocommerce_admin_meta_boxes_order.default_state;billing_obj.length&&city_select($("#_billing_city"),billing_val)}function admin_shipping_change(){var shipping_obj=$("#_shipping_state"),shipping_val=shipping_obj.val()||woocommerce_admin_meta_boxes_order.default_state;shipping_obj.length&&city_select($("#_shipping_city"),shipping_val)}state_city_load(),country_load(),$(document.body).on("click",".shipping-calculator-button",(function(){setTimeout((function(){$("#calc_shipping_state").trigger("change")}),200)})),$(document).on("change","select.country_to_state",(function(){var $parent=$(this).closest(".form-row").parent(),country=$(this).val();$(document.body).trigger("country_changing",[country,$parent]),country_load()})),$(document).on("change","select.state_select",(function(){var $container=$(this).closest(".form-row").parent(),state=$(this).val(),country=$container.find(".country_to_state").val();(void 0!==cities[country]||$(".woocommerce-shipping-calculator").length)&&$(document.body).trigger("state_changing",[state,$container])})),$(document).on("change","select.city_select",(function(){var $container=$(this).closest(".form-row").parent(),state=$container.find("select.state_select").val(),city=$(this).val(),country=$container.find(".country_to_state").val();void 0!==cities[country]&&$(document.body).trigger("update_checkout").trigger("city_changing",[state,city,$container])})),$("body").on("country_changing",(function(e,country,$parent){var $state,$citybox;country_changing($parent.find("select.state_select"),$parent.find("select.city_select"),country,$parent)})),$("body").on("state_changing",(function(e,state,$container){var $citybox;city_select($container.find("#billing_city, #shipping_city, #calc_shipping_city"),state)})),$("body").on("city_changing",(function(e,state,city,$container){var $citybox;change_zip_code($container.find("#billing_city, #shipping_city, #calc_shipping_city"),$container,state,city)})),$(document).on("click","a.edit_address",(function(e){$(document).trigger("wcadmin_order_edit_billing_address_click")})),$(document).on("wcadmin_order_edit_billing_address_click",(function(e){admin_billing_change(),admin_shipping_change()})),$(document).on("change","#_billing_state",admin_billing_change),$(document).on("change","#_shipping_state",admin_shipping_change),$(document).on("change","#_billing_city, #_shipping_city",(function(){var $container=$(this).closest("div"),state=$container.find("select.js_field-state").val(),city=$(this).val();change_zip_code($(this),$container,state,city)}))}));